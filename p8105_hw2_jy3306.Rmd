---
title: "p8105_HW2"
author: "John Yang"
date: "2024-10-02"
output: github_document
---

```{r, echo = FALSE, message = FALSE}
library(tidyverse)
library(dplyr)
```

## Problem 1

### Reading and cleaning the data

```{r}
sub_df =
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", 
           na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  select(line, station_name, station_latitude, station_longitude,
         route1, route2, route3, route4, route5, route6, route7,
         route8, route9, route10, route11,
         entry, entrance_type, vending, ada) |> 
  mutate(
    entry = case_match(
      entry,
      "YES" ~ 1,
      "NO" ~ 0,
    )
  )
```

### Description of Dataset

The dataset "sub_df" consists of NYC transit subway lines, stations, and the descriptions of station characteritsics, such as location, entry, entrance type, vending, and ADA compliance. The following are the key variables:

  * `line` is a categorical variable describing the NYC transit subway lines.
  * `station_name`is a categorical variable describing the name of the station.
  * `station_latitude` is a continuous variable describing the latitude of the station in degrees.
  * `station_longitude` is a continuous variable describing the longitude of the station in degrees.
  * `route1`-`route11` are categorical variables describing the subway routes that stop at the station.
  * `entry`is a logical variable variable describing the whether there is an entry to the station. 
  * `entry_type`is categorical variables describing the entry types of the station. 
  * `vending` is a categorical variable whether there is vending or not in the station.
  * `ada`is a categorical describing whether there is ADA compliance in the station.

The dataset was cleaned, first, using the `janitor` function to convert the variable names to lowercase and replace spaces with "_". Then, variables of interests were selected. Then the entry variable was converted from character to a logical variable using the `mutate` function. The resulting dataset contains **`r nrow(sub_df)`** rows and **`r ncol(sub_df)`** columns. This data is tidy.

There are `r nrow(distinct(sub_df, line, station_name))` distinct stations in this dataset. 


How many stations are ADA compliant?
There are `r nrow(distinct(filter(sub_df, ada == TRUE), line, station_name))` stations that are ADA compliant.

`r sum(sub_df$ada, na.rm = TRUE)` stations are ADA compliant.

What proportion of station entrances / exits without vending allow entrance?


Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant


